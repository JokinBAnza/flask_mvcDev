{% extends "base.html" %}

{% block title %}Libros{% endblock %}

{% block content %}
<h1>Libros</h1>

<form method="GET" action="{{ url_for('libros.buscar') }}" style="margin-bottom: 20px;">
    <input type="text" name="q" placeholder="Buscar libro..." value="{{ busqueda|default('') }}">
    <button type="submit">Buscar</button>
</form>

{% if libros %}
<table style="width:100%; border-collapse: collapse; margin-bottom: 20px;">
    <thead>
        <tr style="background-color: #f0f0f0;">
            <th style="padding: 10px; border: 1px solid #ccc;">Título</th>
            <th style="padding: 10px; border: 1px solid #ccc;">Autor</th>
            <th style="padding: 10px; border: 1px solid #ccc;">Estado</th>
        </tr>
    </thead>
    <tbody>
    {% for libro, estado in libros %}
<tr>
    <td style="padding: 10px; border: 1px solid #ccc;">
        <a href="{{ url_for('libros.detalle', id=libro.id) }}">{{ libro.titulo }}</a>
    </td>
    <td style="padding: 10px; border: 1px solid #ccc;">{{ libro.autor }}</td>
    <td style="padding: 10px; border: 1px solid #ccc;">{{ estado }}</td>
</tr>
{% endfor %}

    </tbody>
</table>

{% else %}
<p>No se encontraron libros que coincidan con tu búsqueda.</p>
{% endif %}

<div style="margin-top: 20px; text-align: right;">
    <button style="padding: 10px 20px;" onclick="location.href='{{ url_for('libros.crear') }}'">Crear nuevo libro</button>
</div>
{% endblock %}
